<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' https://www.googletagmanager.com https://static.cloudflareinsights.com 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com data:; img-src 'self' https://assets.codepen.io data:; font-src 'self' https://fonts.gstatic.com; connect-src 'self' https://www.google-analytics.com https://cloudflareinsights.com https://static.cloudflareinsights.com; object-src 'none'; frame-src 'self'; base-uri 'self';" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Player Selector - Labs</title>
    <style>
        :root {
            --bg-color: oklch(from #333 l c h);
            --card-bg: oklch(.15 0 0 / .5);
            --accent-color: oklch(.6 .2 260 / .8);
            --text-main: oklch(from #fff l c h / .8);
            --text-muted: oklch(.7 0 0);
            --ease-premium: cubic-bezier(.23, 1, .32, 1);
        }

        body {
            display: grid;
            place-items: center;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            min-block-size: 100dvh;
            overflow: hidden;
            timeline-scope: --card-0, --card-1, --card-2, --card-3;
        }

        .header {
            position: fixed;
            inset-block-start: 2rem;
            text-align: center;
            z-index: 10;

            & h1 {
                font-size: 2.5rem;
                font-weight: 800;
                margin: 0;
                letter-spacing: -0.02em;
                background: linear-gradient(in oklab to right, var(--text-main), var(--accent-color));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
            }

            & p {
                color: var(--text-muted);
                margin-top: 0.5rem;
            }
        }

        .carousel-view {
            display: flex;
            align-items: center;
            inline-size: 100%;
            block-size: 100dvh;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            scroll-behavior: smooth;
            gap: 2rem;
            box-sizing: border-box;
            cursor: grab;

            &:active {
                cursor: grabbing;
            }

            &::-webkit-scrollbar {
                display: none;
            }
        }

        .player-card {
            display: flex;
            flex-direction: column;
            flex: 0 0 95vw;
            position: relative;
            block-size: 75dvh;
            border-radius: 6rem;
            corner-shape: squircle;
            overflow: hidden;
            scroll-snap-align: center;
            scroll-snap-stop: always;
            view-timeline-name: --card-self;
            view-timeline-axis: inline;
            animation-timeline: --card-self;
            animation-range: cover 0% cover 100%;
            transform-style: preserve-3d;
            box-shadow: 0 25px 50px -12px oklch(from rgba(0, 0, 0, 0.5) l c h);

            & .player-frame {
                flex: 1;
                inline-size: 100%;
                block-size: 100%;
                border: none;
            }
        }

        .card-header {
            display: flex;
            justify-content: center;
            align-items: center;
            position: absolute;
            inset-block-start: 0;
            inset-inline-start: 0;
            inline-size: 100%;
            padding: 2rem;
            box-sizing: border-box;
            z-index: 5;
            pointer-events: none;
            background: linear-gradient(in oklab to bottom, oklch(0 0 0 / .6) 0%, transparent 100%);

            & h2 {
                margin: 0;
                font-size: 1.5rem;
                color: var(--text-main);
                text-shadow: 0 2px 10px oklch(from rgba(0, 0, 0, 0.8) l c h);
                font-weight: 600;
                letter-spacing: -0.01em;
            }
        }

        .nav-controls {
            position: fixed;
            inset-block-end: 4rem;
            display: flex;
            gap: 2rem;
            align-items: center;
            z-index: 10;
        }

        .pagination {
            display: flex;
            gap: 0.75rem;
        }

        .dot {
            inline-size: 0.5rem;
            block-size: 0.5rem;
            border-radius: 50%;
            background: oklch(1 0 0 / .2);
            cursor: pointer;
            transition: all 0.3s ease;
            animation: dot-highlight linear both;
            animation-range: cover 20% cover 80%;
        }

        @keyframes dot-highlight {

            0%,
            100% {
                background: oklch(1 0 0 / .2);
                transform: scale(1);
            }

            50% {
                background: var(--accent-color);
                transform: scale(1.3);
            }
        }
    </style>
</head>

<body>
    <main class="carousel-view" id="carousel">
        <!-- Rendered by JS -->
    </main>

    <nav class="nav-controls">
        <div class="pagination" id="pagination">
            <!-- Rendered by JS -->
        </div>
    </nav>

    <script>
        const players = [
            { title: "Main Media Player", url: "media-player.html" },
            { title: "Inline Widget", url: "media-player-inline.html" },
            { title: "Lock Screen Player", url: "media-player-lock-screen.html" },
            { title: "Media Player Widget", url: "media-player-widget.html" }
        ];

        const carousel = document.getElementById('carousel');
        const pagination = document.getElementById('pagination');


        players.forEach((player, index) => {
            const card = document.createElement('div');
            card.className = 'player-card';
            card.style.viewTimelineName = `--card-${index}`;
            card.innerHTML = `
                <div class="card-header"> 
                    <h2>${player.title}</h2>
                </div>
                <iframe class="player-frame" src="${player.url}" loading="lazy"></iframe>
            `;
            carousel.appendChild(card);

            const dot = document.createElement('div');
            dot.className = 'dot';
            dot.style.animationTimeline = `--card-${index}`;

            dot.addEventListener('click', () => {
                card.scrollIntoView({ behavior: 'smooth', inline: 'center' });
            });
            pagination.appendChild(dot);
        });

        window.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') carousel.scrollBy({ left: -window.innerWidth * 0.8, behavior: 'smooth' });
            if (e.key === 'ArrowRight') carousel.scrollBy({ left: window.innerWidth * 0.8, behavior: 'smooth' });
        });
    </script>
</body>

</html>